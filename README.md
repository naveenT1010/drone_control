follow the px4.io

if the error for protobuf occurs,
check if you have libprotobuf-dev (it is preinstalled with ubunutu)
if not,
then install it

and after that, install:
protobuf-compiler
